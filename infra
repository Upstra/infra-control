#!/bin/bash

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

source "$SCRIPT_DIR/scripts/config.sh"

case "$1" in
  setup-env)
    source "$SCRIPT_DIR/scripts/setup-env.sh"
    ;;  
  deploy|start|stop|restart|status|logs)
    source "$SCRIPT_DIR/scripts/docker.sh"
    $1
    ;;  
  backup|restore)
    source "$SCRIPT_DIR/scripts/db.sh"
    $1
    ;;  
  migrate)
    source "$SCRIPT_DIR/scripts/migrate.sh"
    ;;  
  clean)
    source "$SCRIPT_DIR/scripts/clean.sh"
    ;;  
  help|--help|-h|"")
    show_help
    ;;  
  *)
    echo -e "${RED}‚ùå Inconnu: $1${NC}"
    show_help
    exit 1
    ;;
esac